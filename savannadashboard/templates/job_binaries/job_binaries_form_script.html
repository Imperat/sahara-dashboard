<script type="text/javascript">
    addHorizonLoadEvent(function () {
        horizon.modals.addModalInitFunction(function (modal) {
          hide_extra_fields();
          function hide_extra_fields() {
            $("[name=job_binary_username]").closest(".control-group").hide();
            $("[name=job_binary_password]").closest(".control-group").hide();
            $("[name=job_binary_file]").closest(".control-group").hide();
            $("[name=job_binary_url]").closest(".control-group").hide();
            $("[name=job_binary_savanna_internal]").closest(".control-group").hide();
          }
          $("#id_job_binary_type").change(function() {
            var label = $("#id_job_binary_url_label");
            var bin_file = $("[name=job_binary_file]").closest(".control-group");
            var bin_choice = $("[name=job_binary_savanna_internal]").closest(".control-group");
            var bin_url = $("[name=job_binary_url]").closest(".control-group");
            var username = $("[name=job_binary_username]").closest(".control-group");
            var password = $("[name=job_binary_password]").closest(".control-group");
            switch($(this).val()) {
              case "savanna-db":
                label.html("savanna-db://");
                username.hide();
                password.hide();
                bin_file.show();
                bin_choice.show();
                bin_url.hide();
                break;
              case "swift-external":
                username.hide();
                password.hide();
                bin_file.hide();
                bin_choice.hide();
                bin_url.show()
                label.html("swift-external://");
                break;
              case "swift-internal":
                username.show();
                password.show();
                bin_file.hide();
                bin_choice.hide();
                bin_url.show();
                label.html("swift-internal://");
                break;
            }
          });
          $("#id_job_binary_type").change();

          $("[name=job_binary_savanna_internal]").change(function() {
            var bin_file = $("[name=job_binary_file]").closest(".control-group");
            var bin_choice = $("[name=job_binary_savanna_internal]").closest(".control-group");
            var bin_url = $("[name=job_binary_url]").closest(".control-group");
            switch($(this).val()) {
              case "":
                bin_file.show();
                break;
              default:
                bin_file.hide();
                break;
            }
          });
          $("#job_binary_savanna_internal").change();
       });
    });
</script>
